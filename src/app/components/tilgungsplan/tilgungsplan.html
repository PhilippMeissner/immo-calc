<button class="schedule-toggle" (click)="toggleSchedule()">
  {{ showSchedule() ? 'Tilgungsplan ausblenden' : 'Tilgungsplan anzeigen' }}
</button>

@if (showSchedule()) {
  <div class="table-wrapper">
    <table class="schedule">
      <thead>
        <tr>
          <th>Jahr</th>
          <th class="amount">Anfangssaldo</th>
          <th class="amount">Zinsen</th>
          <th class="amount">Anteil</th>
          <th class="amount">Tilgung</th>
          <th class="amount">Anteil</th>
          @if (hasSpecialRepayment()) {
            <th class="amount">Sondertilgung</th>
          }
          <th class="amount">Restschuld</th>
        </tr>
      </thead>
      <tbody>
        @for (entry of schedule(); track entry.year) {
          <tr>
            <td>{{ entry.year }}</td>
            <td class="amount">{{ entry.beginningBalance | number:'1.2-2':'de-DE' }} €</td>
            <td class="amount">{{ entry.interest | number:'1.2-2':'de-DE' }} €</td>
            <td class="amount rate">{{ entry.interest / (entry.interest + entry.principal) * 100 | number:'1.1-1':'de-DE' }} %</td>
            <td class="amount">{{ entry.principal | number:'1.2-2':'de-DE' }} €</td>
            <td class="amount rate">{{ entry.principal / (entry.interest + entry.principal) * 100 | number:'1.1-1':'de-DE' }} %</td>
            @if (hasSpecialRepayment()) {
              <td class="amount">{{ entry.specialRepayment | number:'1.2-2':'de-DE' }} €</td>
            }
            <td class="amount">{{ entry.endingBalance | number:'1.2-2':'de-DE' }} €</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}
