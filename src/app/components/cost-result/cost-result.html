@if (result(); as r) {
  <div class="card">
    <h2>Ergebnis</h2>

    <div class="hero">
      <span class="hero-label">Gesamtkosten</span>
      <span class="hero-value">{{ r.totalPurchasePrice | number:'1.2-2':'de-DE' }} €</span>
    </div>

    <div class="stat-cards">
      <div class="stat-card">
        <span class="stat-label">Kaufpreis</span>
        <span class="stat-value">{{ r.purchasePrice | number:'1.2-2':'de-DE' }} €</span>
      </div>
      <div class="stat-card highlight">
        <span class="stat-label">Kaufnebenkosten</span>
        <span class="stat-value">{{ r.totalCosts | number:'1.2-2':'de-DE' }} €</span>
        <span class="stat-sub">{{ costPercentage() | number:'1.2-2':'de-DE' }} % des Kaufpreises</span>
      </div>
    </div>

    <div class="table-wrapper">
    <table class="breakdown">
      <thead>
        <tr>
          <th>Position</th>
          <th class="rate">% des Kaufpreises</th>
          <th class="amount">Betrag</th>
        </tr>
      </thead>
      <tbody>
        <tr class="purchase-row">
          <td>Kaufpreis</td>
          <td class="rate"></td>
          <td class="amount">{{ r.purchasePrice | number:'1.2-2':'de-DE' }} €</td>
        </tr>
        <tr class="purchase-row">
          <td>Kaufnebenkosten</td>
          <td class="rate">{{ costPercentage() | number:'1.2-2':'de-DE' }} %</td>
          <td class="amount">{{ r.totalCosts | number:'1.2-2':'de-DE' }} €</td>
        </tr>
        @for (item of costItemsWithShare(); track item.label) {
          <tr [class.disabled]="!item.isEnabled">
            <td class="indent">
              {{ item.label }}
              @if (!item.isEnabled) {
                <span class="badge">deaktiviert</span>
              }
            </td>
            <td class="rate">{{ item.rate | number:'1.2-2':'de-DE' }} %</td>
            <td class="amount">{{ item.amount | number:'1.2-2':'de-DE' }} €</td>
          </tr>
        }
      </tbody>
      <tfoot>
        <tr class="total-row">
          <td>Gesamtkosten</td>
          <td class="rate"></td>
          <td class="amount">{{ r.totalPurchasePrice | number:'1.2-2':'de-DE' }} €</td>
        </tr>
      </tfoot>
    </table>
    </div>
  </div>
}
